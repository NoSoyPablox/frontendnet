@model Producto

<div class="card mt-3 shadow-sm">
    <div class="row g-0">
        <!-- Imagen del producto -->
        <div class="col-md-5 text-center bg-light d-flex align-items-center justify-content-center p-3">
            <img src='@((Model.ArchivoId == null) ? "https://placehold.co/300x200/FFF/999?text=Artículo" : $"{ViewBag.Url}/api/archivos/{Model.ArchivoId}")'
                alt="@Model.Titulo" class="portada img-fluid rounded" style="max-height: 300px;">
        </div>

        <!-- Información del producto -->
        <div class="col-md-7">
            <div class="card-body">
                <h4 class="card-title text-dark fw-bold">@Model.Titulo</h4>
                <p class="text-muted">@Model.Descripcion</p>

                <h3 class="text-primary fw-bold mt-4 mb-3">$@Model.Precio</h3>
                <p class="text-success fw-semibold mb-4">Producto disponible</p>

                @if (!ViewBag.EnCarrito)
                {
                    <!-- Formulario para agregar al carrito -->
                    <form asp-action="Carrito" asp-route-id="@Model.ProductoId" class="mb-4">
                        <div class="d-flex align-items-center mb-3">
                            <label class="me-3">Cantidad:</label>
                            <button type="button" class="btn btn-outline-primary btn-sm me-2"
                                onclick="modificarCantidad(-1)">-</button>
                            <input id="cantidad-value" name="cantidad" type="text"
                                class="form-control form-control-sm text-center" value="1" style="width: 50px;" readonly>
                            <button type="button" class="btn btn-outline-primary btn-sm ms-2"
                                onclick="modificarCantidad(1)">+</button>
                        </div>
                        <button class="btn btn-primary w-100" type="submit">Agregar al carrito</button>
                    </form>
                }
                else
                {
                    <div class="text-center">
                        <p class="text-success fw-semibold">¡Producto ya en el carrito!</p>
                        <a asp-controller="Carrito" asp-action="Index" class="btn btn-primary">Ir al carrito</a>
                    </div>
                }

                <!-- Botón adicional -->
                <button class="btn btn-outline-secondary w-100 mt-3"
                    onclick="location.href='@Url.Action("Index", "Tienda")'">Volver a la tienda</button>
            </div>
        </div>
    </div>
</div>

<script>
    function modificarCantidad(cambio) {
        const input = document.getElementById("cantidad-value");
        const valorActual = parseInt(input.value) || 1;
        let nuevoValor = valorActual + cambio;

        // Limita el valor entre 1 y 10
        nuevoValor = Math.min(10, Math.max(1, nuevoValor));

        input.value = nuevoValor;
    }
</script>
